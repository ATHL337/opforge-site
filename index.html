<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OPFORGE</title>
<meta name=description content="Detection Engineering and Threat Emulation Lab"><meta name=author content="Alfredo Pelaez"><link rel=canonical href=https://opforge.dev/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://opforge.dev/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://opforge.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://opforge.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://opforge.dev/apple-touch-icon.png><link rel=mask-icon href=https://opforge.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://opforge.dev/index.xml><link rel=alternate type=application/json href=https://opforge.dev/index.json><link rel=alternate hreflang=en href=https://opforge.dev/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://opforge.dev/"><meta property="og:site_name" content="OPFORGE"><meta property="og:title" content="Latest Posts from the OPFORGE Project"><meta property="og:description" content="Welcome to the OPFORGE project blog ‚Äî a hands-on portfolio exploring cyber operations, detection engineering, and AI-enabled threat emulation.
Below you‚Äôll find write-ups on the infrastructure, VM build processes, segmentation logic, and automation techniques powering OPFORGE.
Stay sharp, build clean, and emulate purposefully."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta property="og:image" content="https://opforge.dev/preview.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://opforge.dev/preview.png"><meta name=twitter:title content="Latest Posts from the OPFORGE Project"><meta name=twitter:description content="Detection Engineering and Threat Emulation Lab"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"OPFORGE","url":"https://opforge.dev/","description":"Detection Engineering and Threat Emulation Lab","logo":"https://opforge.dev/favicon.png","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://opforge.dev/ accesskey=h title="OPFORGE (Alt + H)">OPFORGE</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://opforge.dev/ title=Home><span class=active>Home</span></a></li><li><a href=https://opforge.dev/docs/ title=Docs><span>Docs</span></a></li><li><a href=https://opforge.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://opforge.dev/about/ title=About><span>About</span></a></li><li><a href=https://opforge.dev/docs/ title="OPFORGE Docs"><span>OPFORGE Docs</span></a></li></ul></nav></header><main class=main><div class=post-content><p>Welcome to the OPFORGE project blog ‚Äî a hands-on portfolio exploring cyber operations, detection engineering, and AI-enabled threat emulation.</p><p>Below you&rsquo;ll find write-ups on the infrastructure, VM build processes, segmentation logic, and automation techniques powering OPFORGE.</p><p>Stay sharp, build clean, and emulate purposefully.</p></div><article class="first-entry home-info"><header class=entry-header><h1>Welcome to OPFORGE</h1></header><div class=entry-content>A cyber operations lab focused on threat detection, adversary emulation, and explainable AI.</div><footer class=entry-footer><div class=social-icons></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 7: VLAN Foundations and DMZ Segmentation</h2></header><div class=entry-content><p>‚ÄúDivide and rule, the politician cries; unite and lead, is watchword of the wise.‚Äù ‚Äî Johann Wolfgang von Goethe
‚ú® VLAN Foundations and DMZ Segmentation This post documents the foundational setup of VLAN-based segmentation in the OPFORGE lab, focusing on the transition from flat subnets to trunked interfaces and routed VLANs. It marks a major step in the network maturity of the lab, preparing for more realistic Red Team lateral movement simulations and Blue Team detection scenarios.
...</p></div><footer class=entry-footer><span title='2025-06-19 18:45:00 -0500 -0500'>June 19, 2025</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 7: VLAN Foundations and DMZ Segmentation" href=https://opforge.dev/posts/opforge_post_7_vlan_segmentation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 6: DNS and Routing Lock-in across OPFORGE Zones</h2></header><div class=entry-content><p>‚úÖ Phase Summary We‚Äôve reached a critical milestone: stable end-to-end routing and DNS resolution across all OPFORGE zones, including RED_NET, INTERNAL_NET, and DMZ. This post captures what it took to get there, the routing fixes, NAT updates, DNS handoffs, and the principle of least privilege in firewall policies.
üß† Background The OPFORGE lab was originally designed with segmentation across five main zones:
RED_NET (Offensive tools and test payloads) INTERNAL_NET (Enterprise clients and DC) EXT_NET (Gateway between RED and DMZ) DMZ_NET (Public-facing infrastructure simulation) InternetSim (Outbound internet access) The challenge was building a realistic trust boundary enforced by routers and firewalls‚Äîwhile ensuring systems could still route, resolve, and log across appropriate zones.
...</p></div><footer class=entry-footer><span title='2025-06-19 00:00:00 +0000 UTC'>June 19, 2025</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 6: DNS and Routing Lock-in across OPFORGE Zones" href=https://opforge.dev/posts/2025-06-19-post-6-routing-dns-success/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 5: DNS & Routing End-to-End</h2></header><div class=entry-content><p>‚ÄúIf you know the way broadly, you will see it in all things.‚Äù ‚Äî Miyamoto Musashi
‚ú® DNS & Routing End-to-End This post captures the initial end-to-end routing and DNS resolution across segmented subnets in the OPFORGE lab. It enabled reliable communication across infrastructure zones and laid the groundwork for centralized visibility and detection.
üìå Abstract Problem: The initial network configuration lacked reliable inter-segment routing and DNS resolution, limiting endpoint communication and visibility into host activity.
...</p></div><footer class=entry-footer><span title='2025-06-17 02:57:00 -0500 -0500'>June 17, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 5: DNS & Routing End-to-End" href=https://opforge.dev/posts/opforge_post_5_dns_route/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 4: Initial Connectivity ‚Äì Red to DMZ Validation</h2></header><div class=entry-content><p>‚ÄúIn the midst of chaos, there is also opportunity.‚Äù ‚Äî Sun Tzu
‚ú® Initial Connectivity ‚Äì Red to DMZ Validation This post captures the preliminary test to confirm routed communication between the Red Team subnet and the DMZ prior to full lab routing. It served as a necessary checkpoint to ensure that the segmented network was behaving as expected before DNS, NAT, and VLAN tagging were added.
üìå Abstract Problem: With the new segmented topology in OPFORGE, we needed to verify that basic IP connectivity from RED ‚Üí DMZ was functional before layering on DNS and full routing.
...</p></div><footer class=entry-footer><span title='2025-06-17 02:55:00 -0500 -0500'>June 17, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 4: Initial Connectivity ‚Äì Red to DMZ Validation" href=https://opforge.dev/posts/opforge_post_4_red_to_dmz./></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 3: Foundational Segmentation Setup</h2></header><div class=entry-content><p>‚ÄúOrder and simplification are the first steps toward mastery of a subject.‚Äù ‚Äî Thomas Mann
‚ú® Foundational Segmentation Setup This post captures the introduction of initial segmentation boundaries within the OPFORGE lab. Before advanced VLAN tagging and DMZ logic, basic subnet design and routing were validated to support scalable infrastructure development.
üìå Abstract Problem Statement: The original flat lab design limited control over traffic flow and security boundaries, making it unsuitable for advanced threat simulation or detection testing.
...</p></div><footer class=entry-footer><span title='2025-06-17 02:49:00 -0500 -0500'>June 17, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 3: Foundational Segmentation Setup" href=https://opforge.dev/posts/opforge_post_3_segmentation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Post 2: Routing the OPFORGE Lab</h2></header><div class=entry-content><p>‚ÄúYou must understand the whole of life, not just one little part of it. That is why you must read, look at the skies, sing, and dance.‚Äù ‚Äî Jiddu Krishnamurti
üß† Routing the OPFORGE Lab This post outlines the implementation of static routing across segmented subnets in the OPFORGE lab using VyOS routers. With a baseline topology now established, we focus on connecting RED, INT, and DMZ zones through transit routers and validating initial east-west communication.
...</p></div><footer class=entry-footer><span title='2025-06-16 14:00:00 -0500 -0500'>June 16, 2025</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Post 2: Routing the OPFORGE Lab" href=https://opforge.dev/posts/opforge_post_2_routing/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>OPFORGE Network Internet Access Setup Guide</h2></header><div class=entry-content><p>OPFORGE Network Internet Access Setup Guide This guide outlines the configuration steps used to enable full internet access from the Red Network within the OPFORGE lab environment. It includes configuration of VyOS routers opf-rtred and opf-rt-inet, as well as ensuring connectivity from a host such as opf-lnx01.
üîß 1. opf-rt-inet Configuration (Internet Gateway) Interfaces eth0: 192.168.10.2/24 (RED_NET) eth1: 192.168.1.25/24 (WAN - External/Internet-facing) Commands configure # Set interface IPs (if not set) set interfaces ethernet eth0 address 192.168.10.2/24 set interfaces ethernet eth1 address 192.168.1.25/24 # Default route to WAN gateway set protocols static route 0.0.0.0/0 next-hop 192.168.1.1 # Enable NAT for RED_NET to WAN set nat source rule 100 outbound-interface eth1 set nat source rule 100 source address 192.168.10.0/24 set nat source rule 100 translation address masquerade # Enable DNS forwarding set service dns forwarding listen-address 192.168.10.2 set service dns forwarding allow-from 192.168.10.0/24 set service dns forwarding name-server 1.1.1.1 set service dns forwarding name-server 8.8.8.8 commit save exit üîß 2. opf-rtred Configuration (Red Network Router) Interfaces eth0: 192.168.10.1/24 (RED_NET) Commands configure # Set static default route to forward traffic to opf-rt-inet set protocols static route 0.0.0.0/0 next-hop 192.168.10.2 # Set DNS resolver to point to opf-rt-inet set system name-server 192.168.10.2 commit save exit üß™ 3. opf-lnx01 or Red Network Host Ensure the following are configured on your RED_NET endpoints:
...</p></div><footer class=entry-footer><span title='2025-06-12 00:00:00 +0000 UTC'>June 12, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to OPFORGE Network Internet Access Setup Guide" href=https://opforge.dev/posts/opforge-internet-setup/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>OPFORGE Rebrand Checklist for Mimikatz</h2></header><div class=entry-content><p>OPFORGE Rebrand Checklist for Mimikatz This step-by-step guide simplifies the process of rebranding Mimikatz under the OPFORGE project. Use it to create a portfolio-grade build aligned with Threat Emulation, Detection Engineering, and Explainable AI objectives.
Maintainer: Alfredo Pelaez
Date: 2025-05-31
Project Alignment: OPFORGE | High-Yield Performance & Results (H.Y.P.R.) Mindset
‚úÖ Phase 1: Clone and Prepare the Repo Clone the Mimikatz repository:
git clone --recursive https://github.com/gentilkiwi/mimikatz.git Tools/mimikatz Create a backup copy:
...</p></div><footer class=entry-footer><span title='2025-05-31 00:00:00 +0000 UTC'>May 31, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to OPFORGE Rebrand Checklist for Mimikatz" href=https://opforge.dev/posts/2025-05-31-opforge_rebrand_checklist/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Correcting OPF-DC01 Placement in ADINFRA Segment</h2></header><div class=entry-content><p>Background Originally, OPF-DC01 was deployed with an IP address in the CSOCINFRA (192.168.20.0/24) subnet. However, per OPFORGE‚Äôs logical segmentation, all domain services must reside in the ADINFRA (192.168.40.0/24) segment to maintain operational and architectural integrity.
Problem OPF-DC01 had IP 192.168.20.100 (incorrect subnet). The gateway was misconfigured as 192.168.50.5 (C2 CONTROL). This broke domain service accessibility and violated the subnet‚Äôs trust boundary. Solution 1. Re-IP OPF-DC01 to ADINFRA New-NetIPAddress -InterfaceAlias "Ethernet0" ` -IPAddress "192.168.40.100" ` -PrefixLength 24 ` -DefaultGateway "192.168.40.5" 2. Update DNS Set-DnsClientServerAddress -InterfaceAlias "Ethernet0" -ServerAddresses "192.168.40.100" 3. Fix Default Route Remove-NetRoute -InterfaceAlias "Ethernet0" -NextHop 192.168.50.5 New-NetRoute -InterfaceAlias "Ethernet0" ` -DestinationPrefix "0.0.0.0/0" ` -NextHop "192.168.40.5" Results OPF-DC01 now properly resides at 192.168.40.100. Routing flows through opf-fw01 via gateway 192.168.40.5. It is ready to serve domain joins from endpoints like OPF-MBR01.</p></div><footer class=entry-footer><span title='2025-05-27 00:00:00 +0000 UTC'>May 27, 2025</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Correcting OPF-DC01 Placement in ADINFRA Segment" href=https://opforge.dev/posts/2025-05-27-opf-dc01-corrective-ip-alignment/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Fixing DNS Resolution in OPFORGE: Domain Forwarding via pfSense</h2></header><div class=entry-content><p>üß© Problem Summary After placing OPF-DC01 into the ADINFRA subnet (192.168.40.0/24), OPF-MBR01 was unable to resolve public domains such as google.com. DNS requests to 192.168.40.100 (the DC) failed to resolve, even though routing to the firewall was functional.
üîç Root Cause By default, OPF-DC01 was not forwarding DNS queries to a working upstream resolver. Attempted use of public DNS forwarders like 8.8.8.8 and 1.1.1.1 failed because OPF-DC01 had no internet access in the segmented lab setup.
...</p></div><footer class=entry-footer><span title='2025-05-27 00:00:00 +0000 UTC'>May 27, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;Alfredo Pelaez</footer><a class=entry-link aria-label="post link to Fixing DNS Resolution in OPFORGE: Domain Forwarding via pfSense" href=https://opforge.dev/posts/2025-05-27-opf-dns-forwarding-infrastructure-fix/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://opforge.dev/page/2/>Next&nbsp;&nbsp;¬ª</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://opforge.dev/>OPFORGE</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>